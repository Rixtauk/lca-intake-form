<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LCA-CALC Intake Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <style>
      body {
        font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      }
      .gradient-header {
        background: linear-gradient(to right, #34ee63, #2acc56);
      }
    </style>
  </head>
  <body class="min-h-screen">
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const { useState } = React;

      const iconBase = {
        viewBox: '0 0 24 24',
        fill: 'none',
        stroke: 'currentColor',
        strokeWidth: '2',
        strokeLinecap: 'round',
        strokeLinejoin: 'round'
      };

      const AlertCircle = ({ className }) => (
        <svg {...iconBase} className={className}>
          <circle cx="12" cy="12" r="10" />
          <line x1="12" y1="8" x2="12" y2="12" />
          <line x1="12" y1="16" x2="12.01" y2="16" />
        </svg>
      );

      const CheckCircle2 = ({ className }) => (
        <svg {...iconBase} className={className}>
          <path d="M9 12l2 2 4-4" />
          <circle cx="12" cy="12" r="10" />
        </svg>
      );

      const Loader2 = ({ className }) => (
        <svg {...iconBase} className={className}>
          <path d="M21 12a9 9 0 10-9 9" />
        </svg>
      );

      const ChevronRight = ({ className }) => (
        <svg {...iconBase} className={className}>
          <polyline points="9 18 15 12 9 6" />
        </svg>
      );

      const ChevronLeft = ({ className }) => (
        <svg {...iconBase} className={className}>
          <polyline points="15 18 9 12 15 6" />
        </svg>
      );

      function LCACalcForm() {
        const [currentPage, setCurrentPage] = useState(1);
        const totalPages = 6;

        const [formData, setFormData] = useState({
          seats: '',
          lcasEpds: '',
          languages: '',
          materialsList: '',
          tm65CallTime: '',
          bomStorage: '',
          bomProcess: '',
          skuProcess: '',
          sapSystem: '',
          trainingFunctions: ''
        });

        const [submitStatus, setSubmitStatus] = useState({ type: '', message: '' });
        const [isSubmitting, setIsSubmitting] = useState(false);
        const [isComplete, setIsComplete] = useState(false);

        const handleChange = (event) => {
          const { name, value } = event.target;
          setFormData((prev) => ({
            ...prev,
            [name]: value
          }));
        };

        const handleSubmit = async () => {
          const emptyFields = Object.entries(formData).filter(([_, value]) => !value.trim());
          if (emptyFields.length > 0) {
            setSubmitStatus({
              type: 'error',
              message: 'Please fill in all fields before submitting.'
            });
            return;
          }

          setIsSubmitting(true);
          setSubmitStatus({ type: '', message: '' });

          try {
            const payload = {
              '1': formData.seats,
              '2': formData.lcasEpds,
              '3': formData.languages,
              '4': formData.materialsList,
              '5': formData.tm65CallTime,
              '6': `Where is the BOM stored?: ${formData.bomStorage}\n\nBOM collection process: ${formData.bomProcess}\n\nSKU creation process: ${formData.skuProcess}`,
              '7': formData.sapSystem,
              '9': formData.trainingFunctions
            };

            const response = await fetch('https://hook.eu2.make.com/ns86en2yoic2stutc3n71l6weyf66w2s', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(payload)
            });

            if (response.ok || response.status === 200) {
              setFormData({
                seats: '',
                lcasEpds: '',
                languages: '',
                materialsList: '',
                tm65CallTime: '',
                bomStorage: '',
                bomProcess: '',
                skuProcess: '',
                sapSystem: '',
                trainingFunctions: ''
              });
              setSubmitStatus({
                type: 'success',
                message: 'Thank you! Your responses have been received successfully.'
              });
              setIsComplete(true);
            } else {
              const errorText = await response.text();
              throw new Error(`Submission failed with status ${response.status}: ${errorText}`);
            }
          } catch (error) {
            setSubmitStatus({
              type: 'error',
              message: `Error: ${error.message}. Please try again later.`
            });
          } finally {
            setIsSubmitting(false);
          }
        };

        const nextPage = () => {
          if (currentPage < totalPages) {
            setCurrentPage((prev) => prev + 1);
            window.scrollTo({ top: 0, behavior: 'smooth' });
          }
        };

        const prevPage = () => {
          if (currentPage > 1) {
            setCurrentPage((prev) => prev - 1);
            window.scrollTo({ top: 0, behavior: 'smooth' });
          }
        };

        const inputClass = 'w-full px-4 py-3 border border-gray-300 rounded-lg transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-300';
        const progressPercentage = (currentPage / totalPages) * 100;

        if (isComplete) {
          return (
            <div className="min-h-screen py-12 px-4">
              <div className="max-w-3xl mx-auto">
                <div className="bg-white rounded-lg shadow-xl overflow-hidden text-center">
                  <div className="gradient-header px-8 py-12 text-white">
                    <div className="flex justify-center mb-6">
                      <span className="bg-white rounded-full p-4 inline-flex">
                        <CheckCircle2 className="w-12 h-12 text-green-500" />
                      </span>
                    </div>
                    <h1 className="text-3xl font-semibold">Thank you for completing the intake</h1>
                    <p className="text-white/80 mt-2">Our team will be in touch shortly with next steps.</p>
                  </div>
                  <div className="px-8 py-12 space-y-6 text-gray-700">
                    <p className="text-lg">We appreciate the time you took to share the details we need to tailor your LCA-CALC solution.</p>
                    <div className="space-y-2">
                      <p>Next you can expect us to:</p>
                      <ul className="space-y-1">
                        <li>• Review your responses in detail</li>
                        <li>• Send over the TM65 &amp; TM66 session invite at your chosen time</li>
                        <li>• Share a tailored quotation and roadmap workshop proposal</li>
                      </ul>
                    </div>
                    <button
                      type="button"
                      onClick={() => {
                        setIsComplete(false);
                        setSubmitStatus({ type: '', message: '' });
                        setCurrentPage(1);
                      }}
                      className="inline-flex items-center justify-center gap-2 px-6 py-3 border border-gray-300 rounded-lg text-gray-700 font-semibold transition hover:bg-gray-50"
                    >
                      <ChevronLeft className="w-5 h-5" />
                      Start over
                    </button>
                  </div>
                </div>
                <div className="text-center mt-8 text-gray-600 text-sm">
                  <p>© 2024 LCA-CALC. All rights reserved.</p>
                </div>
              </div>
            </div>
          );
        }

        return (
          <div className="min-h-screen py-12 px-4">
            <div className="max-w-4xl mx-auto">
              <div className="bg-white rounded-lg shadow-xl overflow-hidden">
                <div className="px-8 py-12 text-center gradient-header">
                  <div className="mx-auto mb-6 bg-white rounded-lg p-6 inline-block">
                    <img
                      src="https://www.dropbox.com/scl/fi/b18q7sq7ei3z15luwple1/loogo.png?rlkey=ezqoudknshsl71pgpk07trso5&st=1p1mau1l&dl=1"
                      alt="LCA-CALC - Smart Eco-Lighting Metrics"
                      className="h-20 w-auto object-contain mx-auto"
                      onError={(event) => {
                        event.target.style.display = 'none';
                        event.target.parentElement.innerHTML = '<div style=\'color: #34EE63\' class=\'font-bold text-2xl\'>LCA-CALC</div>';
                      }}
                    />
                  </div>
                  <p className="text-xl text-white opacity-90">Solutions tailored to your needs</p>
                </div>

                <div className="px-8 pt-6">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-sm font-medium text-gray-700">Step {currentPage} of {totalPages}</span>
                    <span className="text-sm font-medium text-gray-700">{Math.round(progressPercentage)}%</span>
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-3">
                    <div
                      className="h-3 rounded-full transition-all duration-300"
                      style={{ width: `${progressPercentage}%`, backgroundColor: '#34EE63' }}
                    />
                  </div>
                </div>

                <div className="p-8 space-y-8">
                  {currentPage === 1 && (
                    <div className="space-y-8">
                      <div className="space-y-3">
                        <label htmlFor="seats" className="block text-lg font-semibold text-gray-900">
                          Question 1: How many seats or users do you need?
                        </label>
                        <input
                          type="text"
                          id="seats"
                          name="seats"
                          value={formData.seats}
                          onChange={handleChange}
                          className={inputClass}
                          placeholder="Enter number of seats"
                        />
                      </div>

                      <div className="space-y-3">
                        <label htmlFor="lcasEpds" className="block text-lg font-semibold text-gray-900">
                          Question 2: Number of LCAs &amp; EPDs: how many do you require in the first year?
                        </label>
                        <input
                          type="text"
                          id="lcasEpds"
                          name="lcasEpds"
                          value={formData.lcasEpds}
                          onChange={handleChange}
                          className={inputClass}
                          placeholder="Enter number required"
                        />
                      </div>

                      <div className="space-y-3">
                        <label htmlFor="languages" className="block text-lg font-semibold text-gray-900">
                          Question 3: Do you need other languages than English?
                        </label>
                        <textarea
                          id="languages"
                          name="languages"
                          value={formData.languages}
                          onChange={handleChange}
                          rows="5"
                          className={inputClass}
                          placeholder="Please specify which languages you need..."
                        />
                      </div>
                    </div>
                  )}

                  {currentPage === 2 && (
                    <div className="space-y-8">
                      <div className="space-y-3">
                        <label htmlFor="materialsList" className="block text-lg font-semibold text-gray-900">
                          Question 4: Do you have a list of the most used materials for Flos Spain &amp; Italy?
                        </label>
                        <p className="text-sm text-gray-600">
                          If you don't have it, we can work on it together, the aim is to make sure that all the material datasets that you need are available.
                        </p>
                        <textarea
                          id="materialsList"
                          name="materialsList"
                          value={formData.materialsList}
                          onChange={handleChange}
                          rows="8"
                          className={inputClass}
                          placeholder="Please provide details about your materials list, or indicate if you need assistance creating one..."
                        />
                      </div>

                      <div className="space-y-3">
                        <label className="block text-lg font-semibold text-gray-900">
                          Question 5 – TM65 &amp; TM66: TM65 and TM66 interface
                        </label>
                        <p className="text-sm text-gray-600 mb-3">
                          Let's discuss over a call? Select your preferred time:
                        </p>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                          {[
                            'Monday 13/10/2025 from 10:30 to 13:30',
                            'Tuesday 14/10/2025 from 10:30 to 12:30',
                            'Wednesday 15/10/2025 from 11:30 to 13:30'
                          ].map((slot) => (
                            <button
                              key={slot}
                              type="button"
                              onClick={() =>
                                setFormData((prev) => ({
                                  ...prev,
                                  tm65CallTime: slot
                                }))
                              }
                              className={`p-4 rounded-lg border-2 transition-all text-left ${
                                formData.tm65CallTime === slot
                                  ? 'border-green-400 bg-green-50 shadow-md'
                                  : 'border-gray-300 hover:border-gray-400'
                              }`}
                            >
                              <div className="font-semibold text-gray-900">{slot.split(' from ')[0]}</div>
                              <div className="text-sm text-gray-600">{slot.split(' from ')[1]}</div>
                            </button>
                          ))}
                        </div>
                      </div>
                    </div>
                  )}

                  {currentPage === 3 && (
                    <div className="space-y-8">
                      <div className="space-y-6">
                        <div>
                          <label htmlFor="bomStorage" className="block text-lg font-semibold text-gray-900">
                            Question 6 – Data collection:
                          </label>
                          <label htmlFor="bomStorage" className="block text-base font-medium text-gray-900 mb-2">
                            Where is the information for the BOM for the luminaires stored?
                          </label>
                          <p className="text-sm text-gray-600 mb-2">
                            Is the information stored (ie: API system, SAP, other software, flat files)?
                          </p>
                          <textarea
                            id="bomStorage"
                            name="bomStorage"
                            value={formData.bomStorage}
                            onChange={handleChange}
                            rows="6"
                            className={inputClass}
                            placeholder="Please describe in detail where your BOM information is stored..."
                          />
                        </div>

                        <div>
                          <label htmlFor="bomProcess" className="block text-base font-medium text-gray-900 mb-2">
                            What is the process to collect the information for the BOMs?
                          </label>
                          <textarea
                            id="bomProcess"
                            name="bomProcess"
                            value={formData.bomProcess}
                            onChange={handleChange}
                            rows="6"
                            className={inputClass}
                            placeholder="Please describe your BOM collection process in detail..."
                          />
                        </div>

                        <div>
                          <label htmlFor="skuProcess" className="block text-base font-medium text-gray-900 mb-2">
                            SKU creation process for variants
                          </label>
                          <p className="text-sm text-gray-600 mb-2">
                            Considering a luminaire and all its possible variants – like you did for the Workmate family – what is your process to create the SKUs for all possible variants?
                          </p>
                          <textarea
                            id="skuProcess"
                            name="skuProcess"
                            value={formData.skuProcess}
                            onChange={handleChange}
                            rows="6"
                            className={inputClass}
                            placeholder="Please describe your SKU creation process in detail..."
                          />
                        </div>
                      </div>
                    </div>
                  )}

                  {currentPage === 4 && (
                    <div className="space-y-8">
                      <div className="space-y-3">
                        <label htmlFor="sapSystem" className="block text-lg font-semibold text-gray-900">
                          Question 7 – API SAP system
                        </label>
                        <p className="text-base text-gray-700 mb-3">
                          Is the info for the BOMs available in your SAP system?
                        </p>
                        <textarea
                          id="sapSystem"
                          name="sapSystem"
                          value={formData.sapSystem}
                          onChange={handleChange}
                          rows="10"
                          className={inputClass}
                          placeholder="Please provide detailed information about your SAP system and BOM data availability..."
                        />
                      </div>
                    </div>
                  )}

                  {currentPage === 5 && (
                    <div className="space-y-8">
                      <div className="space-y-3">
                        <label className="block text-lg font-semibold text-gray-900">
                          Question 8 – LCA maturity:
                        </label>
                        <p className="text-base text-gray-700">
                          I propose to have a workshop so that we can discuss the roadmap from pilot to enterprise integration.
                        </p>
                        <div
                          className="rounded-lg p-4 text-sm"
                          style={{ backgroundColor: 'rgba(52, 238, 99, 0.1)', border: '1px solid rgba(52, 238, 99, 0.3)', color: '#1a5c2e' }}
                        >
                          We will schedule this workshop after reviewing your responses.
                        </div>
                      </div>

                      <div className="space-y-3">
                        <label htmlFor="trainingFunctions" className="block text-lg font-semibold text-gray-900">
                          Question 9 – Training:
                        </label>
                        <p className="text-base text-gray-700 mb-2">
                          I have planned for one engineer training, and for the sales team. Are there more functions that would benefit from a training session?
                        </p>
                        <textarea
                          id="trainingFunctions"
                          name="trainingFunctions"
                          value={formData.trainingFunctions}
                          onChange={handleChange}
                          rows="8"
                          className={inputClass}
                          placeholder="List any additional functions or departments that would benefit from training sessions..."
                        />
                      </div>
                    </div>
                  )}

                  {currentPage === 6 && (
                    <div className="space-y-8">
                      <div
                        className="rounded-lg p-6 space-y-4"
                        style={{ background: 'linear-gradient(to right, rgba(52, 238, 99, 0.08), rgba(99, 102, 241, 0.08))' }}
                      >
                        <h3 className="text-xl font-bold text-gray-900">Next Steps:</h3>
                        <div className="space-y-3">
                          <p className="text-base text-gray-700">After reviewing your responses, we will:</p>
                          <div className="text-base text-gray-700 space-y-2 pl-4">
                            <p>• Schedule the TM65 and TM66 interface discussion call at your selected time</p>
                            <p>• Share final quotation</p>
                            <p>• Schedule a workshop to discuss the integration roadmap from pilot to enterprise</p>
                          </div>
                        </div>
                      </div>

                      {submitStatus.type === 'error' && submitStatus.message && (
                        <div className="rounded-lg p-4 flex items-start gap-3 bg-red-50 border border-red-200">
                          <AlertCircle className="w-5 h-5 text-red-600 flex-shrink-0 mt-0.5" />
                          <p className="text-sm text-red-800">{submitStatus.message}</p>
                        </div>
                      )}
                    </div>
                  )}

                  <div className="flex justify-between items-center pt-6 border-t">
                    <button
                      onClick={prevPage}
                      disabled={currentPage === 1}
                      className="flex items-center gap-2 px-6 py-3 rounded-lg border-2 border-gray-300 text-gray-700 font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed hover:border-gray-400 hover:bg-gray-50"
                    >
                      <ChevronLeft className="w-5 h-5" />
                      Previous
                    </button>

                    {currentPage < totalPages ? (
                      <button
                        onClick={nextPage}
                        className="flex items-center gap-2 text-white font-semibold px-6 py-3 rounded-lg transition shadow-lg hover:shadow-xl"
                        style={{ backgroundColor: '#34EE63' }}
                        onMouseEnter={(event) => {
                          event.currentTarget.style.backgroundColor = '#2ACC56';
                        }}
                        onMouseLeave={(event) => {
                          event.currentTarget.style.backgroundColor = '#34EE63';
                        }}
                      >
                        Next
                        <ChevronRight className="w-5 h-5" />
                      </button>
                    ) : (
                      <button
                        onClick={handleSubmit}
                        disabled={isSubmitting}
                        className="text-white font-semibold px-8 py-3 rounded-lg transition duration-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl"
                        style={{ backgroundColor: '#34EE63' }}
                        onMouseEnter={(event) => {
                          if (!isSubmitting) {
                            event.currentTarget.style.backgroundColor = '#2ACC56';
                          }
                        }}
                        onMouseLeave={(event) => {
                          if (!isSubmitting) {
                            event.currentTarget.style.backgroundColor = '#34EE63';
                          }
                        }}
                      >
                        {isSubmitting ? (
                          <>
                            <Loader2 className="w-5 h-5 animate-spin" />
                            Submitting...
                          </>
                        ) : (
                          'Submit Form'
                        )}
                      </button>
                    )}
                  </div>
                </div>
              </div>

              <div className="text-center mt-8 text-gray-600 text-sm">
                <p>© 2024 LCA-CALC. All rights reserved.</p>
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<LCACalcForm />);
    </script>
  </body>
</html>
